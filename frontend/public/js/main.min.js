"use strict";var btnStart=document.querySelector(".asr-btn-start"),string=document.querySelector("#string"),play=document.querySelectorAll(".track__play"),volume=document.querySelectorAll(".track__volume"),asrBtn=document.querySelector(".asr-btn"),resultBody=document.querySelector('[data-type="content"]'),main=document.querySelector("main");function openMain(){var e=document.querySelector("main");e&&!e.classList.contains("open")&&e.classList.add("open")}asrBtn&&asrBtn.addEventListener("click",(function(e){var t=e.target;t.classList.contains("asr-btn-start")?(t.classList.remove("asr-btn-start"),t.classList.add("asr-btn-loading"),setTimeout((function(){t.classList.remove("asr-btn-loading"),t.classList.add("asr-btn-pause"),openMain(),main&&main.classList.contains("open")&&elisa.stop()}),2500)):t.classList.contains("asr-btn-pause")&&(t.classList.remove("asr-btn-pause"),t.classList.add("asr-btn-start"))})),string&&string.addEventListener("change",(function(){return openMain()})),play&&play.forEach((function(e){e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("pause")?t.classList.remove("pause"):t.classList.add("pause")}))})),volume&&volume.forEach((function(e){e.addEventListener("click",(function(e){var t=e.target,a=t.parentNode.querySelector("[data-type=volume_range]");a.value;t.classList.contains("mute")?(t.classList.remove("mute"),a.value=a.dataset.volume):(t.classList.add("mute"),a.dataset.volume=a.value,a.value=0)}))})),resultBody&&resultBody.addEventListener("click",(function(e){if("open"===e.target.dataset.type){var t=e.target.parentNode;t.classList.contains("open")?t.classList.remove("open"):t.classList.add("open")}})),lottie.loadAnimation({container:document.querySelector(".media__wave"),renderer:"svg",loop:!0,autoplay:!0,path:"media/wave.json"});var elisa=lottie.loadAnimation({container:document.querySelector(".media__elisa"),renderer:"svg",loop:!0,autoplay:!0,path:"media/elisa.json"}),player=document.querySelectorAll("[data-type=player]");0!==player.length&&player.forEach((function(e){var t=e.querySelector("[data-id=audio]"),a=e.querySelector("[data-type=duration]");a&&(t.onloadedmetadata=function(e){a.innerHTML=e.target.duration}),e.addEventListener("click",(function(a){var n=a.target,o=n.dataset.type,r=e.querySelector("[data-type=track]"),s=e.querySelector("[data-type=time]"),i=e.querySelector("[data-type=volume_range]"),c=e.querySelector("[data-type=volume]"),l=e.querySelector("[data-type=track_fill]"),u=a.pageX;switch(o){case"btn":n.classList.contains("pause")?t.play():t.pause();break;case"volume":n.classList.contains("mute")?t.muted=!0:t.muted=!1;break;case"volume_range":console.log(n.value);break;case"track":var d=100-(n.getBoundingClientRect().x+n.getBoundingClientRect().width-u)/n.getBoundingClientRect().width*100,m=t.duration*d/100;t.currentTime=m;break;case"track_fill":var v=100-(r.getBoundingClientRect().x+r.getBoundingClientRect().width-u)/r.getBoundingClientRect().width*100,p=t.duration*v/100;t.currentTime=p}i&&i.addEventListener("input",(function(e){var a=e.target.value;t.volume=a/100,0==a?c.classList.contains("mute")||c.classList.add("mute"):!c.classList.contains("mute")||c.classList.remove("mute")})),t.addEventListener("timeupdate",(function(e){var t=e.target.currentTime/e.target.duration*100;s&&(s.innerHTML=e.target.currentTime),l.style.width=Math.round(t)+"%"}))}))}));var scrollbox=document.querySelectorAll("[data-type=scrollbox]");function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}0!==scrollbox.length&&scrollbox.forEach((function(e){var t=e.querySelector("[data-type=scrollbox-track]"),a=e.querySelector("[data-type=scrollbox-btn]"),n=t.getBoundingClientRect().width;a.getBoundingClientRect().width;e.addEventListener("click",(function(e){var o=e.pageX,r=100-(t.getBoundingClientRect().x+n-o)/n*100,s=24*r/100-12,i=125*r/100-1;a.innerHTML=s.toFixed(1),t.style.boxShadow="inset ".concat(-150+Math.floor(i)+25,"px 0 rgb(255,255,255)"),a.style.left=Math.floor(i)+"px"})),a.addEventListener("mousedown",(function(e){document.addEventListener("mousemove",o)})),a.addEventListener("mouseup",(function(e){document.removeEventListener("mousemove",o)})),a.addEventListener("mouseover",(function(e){document.removeEventListener("mousemove",o)}));var o=function(e){var o=e.pageX,r=t.getBoundingClientRect().x+n,s=100-(r-o)/n*100,i=125*s/100,c=24*s/100-12;o>=t.getBoundingClientRect().x&&o<=r&&(a.style.left=Math.floor(i)+"px",a.innerHTML=c.toFixed(1),t.style.boxShadow="inset ".concat(-150+Math.floor(i)+25,"px 0 rgb(255,255,255)"))}})),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));